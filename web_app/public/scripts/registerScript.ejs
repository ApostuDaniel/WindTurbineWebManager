<script>
class Register {
    constructor(registerForm, fields) {
      this.registerForm = registerForm;
      this.fields = fields;
      this.validateOnSubmit();
    }

     validateOnSubmit() {
      let self = this;

      this.registerForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const nume = document.querySelector("#nume").value;
        
        const prenume=document.querySelector("#prenume").value;
        const firma=document.querySelector("#firma").value;
        const cnp=document.querySelector("#cnp").value;
        const mail=document.querySelector("#registermail").value;
        const phone=document.querySelector("#phone").value;
        const adresa=document.querySelector("#adresa").value;
        const pass=document.querySelector("#registerpass").value;
        console.log(nume,prenume,cnp);
        postTheData(nume,prenume,firma,cnp,mail,phone,adresa,pass);
      });
    }
    
   

  }


  async function postTheData(nume,prenume,firma,cnp,mail,phone,adresa,pass)
    {
     const data=await fetch('http://localhost:5000/api/users', {
  method: 'POST',
  body: JSON.stringify({
    firstName:nume,
    lastName:prenume,
    company:firma,
    CNP:cnp,
    mail:mail,
    phone:phone,
    adress:adresa,
    password:pass,

  }),
  headers: {
    'Content-type': 'application/json;',

  }
  })
  const getData=await data.json();
  console.log(getData)
  
  

  

}

const registerForm = document.querySelector(".signup");
if (registerForm) {
    console.log("register")
    const fields = [
      "nume",
      "prenume",
      "firma",
      "cnp",
      "mail",
      "phone",
      "adresa",
      "pass",
    ];
    const validator = new Register(registerForm, fields);
  }

</script>